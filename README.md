# お店管理アプリケーション    

## 実行方法

本プロジェクトは、Dockerを使用して開発環境を構築します．

1.  プロジェクトルート（フロントエンド，バックエンド共に）でDockerコンテナの起動
    ```sh
    docker-compose up --build
    ```

2.  データベースの作成・初期化
    付属ファイルのデータベース初期化スクリプト`db_init.sql`を実行
    ```sh
    mysql -u root -p < db_init.sql
    ```

3.  フロントエンドのサーバーの立ち上げ
    ```sh
    yarn dev
    ```

4.  バックエンドのサーバの立ち上げ
    ```sh
    python manage.py runserver --settings.  --
    ```

4.  以下のURLにアクセス
    `http://localhost:3000/food/diary`


## プロジェクト概要

本アプリケーションは，ユーザーが店舗情報を登録・管理できるWebアプリケーションです．
店舗の登録，編集，削除などができ，シンプルかつわかりやすいUIのもとに実装しています．


## 機能

* **店舗一覧**: 登録しているすべての店舗情報を一覧で表示する
* **店舗詳細**: 各店舗の詳細情報（店舗名，評価，詳細，サイトURL，画像など）を確認できる
* **店舗登録・編集**: 新規店舗の登録，または既存店舗情報の編集が可能


## 使用技術

### フロントエンド
* **Next.js**: Reactベースのフレームワーク
* **React**: UIコンポーネントの構築に使用
* **Axios**: バックエンドとの非同期通信に使用
* **Material UI**: UIコンポーネントライブラリ

### バックエンド
* **Python**: シンプルかつ読みやすいプログラミング言語
* **Django REST Framework**: APIの構築に使用
* **MySQL**: データベース管理システム

### 開発環境・ツール
* **Docker**: 開発環境のコンテナ化に使用
* **VS Code**: 軽量なソースコードエディタ
* **MySQL Workbench**: MySQLのGUIツール


## システム構成

本アプリケーションは，フロントエンド（Next.js）とバックエンド（Django REST Framework）によるクライアント・サーバー型の構成を採用している．

* **フロントエンド**: ユーザーインターフェースを担い，ユーザーの操作に応じてバックエンドAPIを呼び出す
* **バックエンド**: フロントエンドからのリクエストを受けて処理を実行し，MySQLデータベースと連携してデータの更新・削除を行う


## APIルーティング一覧

* `/diary/`: 店舗一覧の取得
* `/diary/add/`: 店舗の新規登録
* `/diary/<id>/`: 既存店舗の詳細
* `/diary/<id>/edit/`: 既存店舗の情報の編集


## データベーススキーマ

本アプリケーションは，主に以下の2つのテーブルで構成している

### `Shop` テーブル

店舗情報を管理するテーブル
| カラム名 | 型 | 補足 |
| :--- | :--- | :--- |
| `id` | `AutoField` | 主キー，自動付与 |
| `image_file` | `ForeignKey` | `ImageFile`への外部キー |
| `name` | `CharField(100)` | 店舗名 |
| `value` | `IntegerField` | 評価 |
| `description` | `Textfield` | 店舗詳細 |
| `cite` | `Textfield` | サイトURL |

### `ImageFile` テーブル

画像情報を管理するテーブル。
| カラム名 | 型 | 補足 |
| :--- | :--- | :--- |
| `id` | `AutoField` | 主キー，自動付与 |
| `url` | `ImageField` | 画像のファイルパス |

## セキュリティ設計 

* **ORMの使用**: Django ORMを介してデータベースにアクセスすることで、SQLインジェクション攻撃を防止。


## エラーハンドリング

* **バリデーションエラー**: シリアライザーによる自動バリデーションで`HTTP 400 Bad Request`を返却
* **例外処理**: `try-except`文を使用し，予期せぬ例外発生時もシステムが異常終了しないように設計


## ログ設計

* **ロギングライブラリ**: Python標準の`logging`ライブラリを使用
* **ログレベル**: `INFO`，`WARNING`，`ERROR`を使い分けてログを出力


## 追加したい機能

* **複数画像アップロード機能**: 1つの店舗に複数の画像を登録できる機能
* **ユーザーレビュー機能**: ユーザーを登録できるようにし，１つの店舗に対し複数の評価などができる機能
* **店舗検索機能**: 店舗名や評価などで絞り込み検索できる機能